<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Fixed Death Mode Balanced</title>

<style>
  html,body{
    margin:0;padding:0;overflow:hidden;
    background:#000;font-family:Arial;
  }

  /* GHOST IMAGES – FIXED VISIBILITY */
  #ghost1, #ghost2, #ghost3{
    position:fixed;
    left:50%; top:50%;
    transform:translate(-50%,-50%) scale(0.1);
    width:70vw; max-width:600px;
    opacity:0;
    pointer-events:none;
    transition:transform 0.35s ease, opacity 0.25s linear;
    z-index:500;
  }

  /* FLASH / BLACKOUT */
  #flash, #black{
    position:fixed; inset:0;
    opacity:0; pointer-events:none;
  }
  #flash{background:#fff;z-index:900;}
  #black{background:#000;z-index:1500;}

  /* CRACK OVERLAY – FIXED */
  #crackOverlay{
    position:fixed; inset:0;
    opacity:0;
    z-index:1400;
    pointer-events:none;
    transition:opacity 0.18s linear;
  }
  #crackOverlay img{
    width:100%; height:100%; object-fit:cover;
  }

  /* BLOOD */
  .blood-splat{
    position:fixed;left:50%;top:50%;
    width:130vmin;height:130vmin;
    transform:translate(-50%,-50%) scale(0.1);
    background:radial-gradient(circle,#ff3030,#4a0000,transparent);
    opacity:0;z-index:1200;
    border-radius:50%;
    transition:transform 0.4s ease-out, opacity 0.25s linear;
  }

  .blood-fill{
    position:fixed;left:0;right:0;bottom:0;
    height:0;background:#700000;z-index:1201;
    transition:height 2s ease-in;
  }

  /* TAP SCREEN */
  #tapToStart{
    position:fixed; inset:0;
    background:#000;color:#fff;
    display:flex;align-items:center;justify-content:center;
    font-size:22px;z-index:2000;
  }

  /* Fake call box */
  #callCard{
    position:fixed;left:50%;bottom:10%;
    transform:translateX(-50%);
    width:85%;max-width:400px;
    background:#111;color:#fff;
    border-radius:12px;
    padding:14px;
    display:none;z-index:2100;
  }

  .callBtns{display:flex;gap:10px;justify-content:center;margin-top:10px;}
  .btn{
    padding:10px 14px;border:none;border-radius:10px;
    font-weight:900;cursor:pointer;
  }
  .btnAccept{background:#4eff7a;color:#000;}
  .btnDecline{background:#ff5252;color:#000;}
</style>
</head>

<body>

<div id="tapToStart">Tap to unlock sound</div>

<!-- Ghosts -->
<img id="ghost1" src="ghostimg1.png">
<img id="ghost2" src="ghostimg2.png">
<img id="ghost3" src="ghostimg2.png">

<!-- Overlays -->
<div id="flash"></div>
<div id="crackOverlay"><img src="crack.png"></div>
<div id="black"></div>

<!-- Blood -->
<div class="blood-splat" id="bloodSplat"></div>
<div class="blood-fill" id="bloodFill"></div>

<!-- Fake Call -->
<div id="callCard">
  <div style="font-size:18px;font-weight:bold;">Unknown Caller</div>
  <div style="font-size:13px;opacity:0.8;margin:6px 0 12px;">Tap Accept to continue</div>
  <div class="callBtns">
    <button class="btn btnAccept" id="acceptBtn">ACCEPT</button>
    <button class="btn btnDecline" id="declineBtn">DECLINE</button>
  </div>
</div>

<!-- Audio -->
<audio id="sound" preload="auto"><source src="ghost.mp3"></audio>

<script>
(function(){

  const tap = document.getElementById("tapToStart");
  const callCard = document.getElementById("callCard");
  const acceptBtn = document.getElementById("acceptBtn");
  const declineBtn = document.getElementById("declineBtn");

  const g1 = document.getElementById("ghost1");
  const g2 = document.getElementById("ghost2");
  const g3 = document.getElementById("ghost3");

  const flash = document.getElementById("flash");
  const crack = document.getElementById("crackOverlay");
  const black = document.getElementById("black");
  const bloodSplat = document.getElementById("bloodSplat");
  const bloodFill = document.getElementById("bloodFill");

  const sound = document.getElementById("sound");

  let unlocked = false;

  tap.addEventListener("click",()=>{
    tap.remove();
    callCard.style.display="block";
    unlocked = true;
  });

  declineBtn.addEventListener("click",()=>{
    callCard.style.display="none";
    startSequence();
  });

  acceptBtn.addEventListener("click",()=>{
    callCard.style.display="none";
    startSequence();
  });

  function flashOnce(ms=80){
    flash.style.opacity=1;
    setTimeout(()=>flash.style.opacity=0,ms);
  }

  function vibrate(p){
    if(navigator.vibrate) navigator.vibrate(p);
  }

  function shake(intensity=20, dur=400){
    const start = performance.now();
    function loop(){
      const now = performance.now();
      if(now-start < dur){
        const x = (Math.random()*intensity)-(intensity/2);
        const y = (Math.random()*intensity)-(intensity/2);
        document.body.style.transform = `translate(${x}px,${y}px)`;
        requestAnimationFrame(loop);
      } else document.body.style.transform="";
    }
    loop();
  }

  function startSequence(){

    if(unlocked){
      sound.addEventListener("loadedmetadata",()=>{
        if(sound.duration>3) sound.currentTime=sound.duration-3;
      });
      sound.play().catch(()=>{});
    }

    /* FIRST GHOST — BALANCED */
    setTimeout(()=>{
      g1.style.opacity=1;
      g1.style.transform="translate(-50%,-50%) scale(1.2)";
      shake(20,400);
      flashOnce(60);
    },300);

    setTimeout(()=>{
      g1.style.opacity=0.5;
      g1.style.transform="translate(-50%,-50%) scale(1.9)";
    },700);

    /* SHADOW GHOST */
    setTimeout(()=>{
      g3.style.opacity=0.9;
      g3.style.transform="translate(-50%,-50%) scale(1.6)";
      setTimeout(()=>g3.style.opacity=0,120);
    },900);

    /* MAIN JUMPSCARE – FIXED SCALE */
    setTimeout(()=>{
      flashOnce(40);
      shake(50,600);
      vibrate([200,60,200]);

      g2.style.opacity=1;
      g2.style.transform="translate(-50%,-50%) scale(2.5)";
    },1100);

    /* CRACK IMPACT – FIXED */
    setTimeout(()=>{
      crack.style.opacity=1;
      flashOnce(100);

      setTimeout(()=>{
        g2.style.transform="translate(-50%,-50%) scale(3.8)";
      },120);

      setTimeout(()=>{
        black.style.opacity=1;
      },180);
    },1250);

    /* BLOOD */
    setTimeout(()=>{
      bloodSplat.style.opacity=1;
      bloodSplat.style.transform="translate(-50%,-50%) scale(1.1)";
    },1550);

    setTimeout(()=>{
      bloodFill.style.height="100%";
    },1800);
  }

})();
</script>

</body>
</html>
