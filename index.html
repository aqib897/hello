<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DEATH MODE EXTREME (Balanced)</title>
<style>
  :root{--bg:#020104}
  html,body{
    height:100%;margin:0;background:var(--bg);
    overflow:hidden;font-family:Arial,system-ui;
  }

  #ghost1,#ghost2,#ghost3{
    position:fixed;left:50%;top:50%;
    transform:translate(-50%,-50%) scale(0.3);
    width:68vw;max-width:720px;opacity:0;
    transition:transform 350ms ease,opacity 200ms linear;
    pointer-events:none;
  }

  #flash,#black{
    position:fixed;inset:0;opacity:0;pointer-events:none
  }

  #flash{background:#fff;z-index:800}
  #black{background:#000;z-index:1200}

  #crackOverlay{
    position:fixed;inset:0;opacity:0;
    z-index:1100;pointer-events:none;
    transition:opacity 140ms linear;
  }

  .blood-splat{
    position:fixed;left:50%;top:40%;
    transform:translate(-50%,-50%) scale(0.2);
    width:120vmin;height:120vmin;
    background:radial-gradient(circle,#ff5050,#600000,transparent);
    border-radius:50%;opacity:0;z-index:1000;
    transition:transform .35s ease-out,opacity .24s linear;
  }

  .blood-fill{
    position:fixed;left:0;right:0;bottom:0;height:0;
    background:linear-gradient(180deg,#b00000,#350000);
    z-index:1005;transition:height 1.8s ease-in;
  }

  #tapToStart{
    position:fixed;inset:0;background:#000;color:#fff;
    display:flex;align-items:center;justify-content:center;
    font-size:20px;z-index:2000
  }

  #callCard{
    position:fixed;left:50%;bottom:12%;
    transform:translateX(-50%);
    width:86%;max-width:420px;
    padding:14px 16px;border-radius:14px;
    background:linear-gradient(180deg,#0b0b0b,#111);
    box-shadow:0 20px 50px rgba(0,0,0,0.6);
    color:#fff;z-index:2100;display:none
  }

  .callBtns{display:flex;gap:12px;justify-content:center}
  .btn{
    padding:10px 14px;border-radius:10px;
    border:none;font-weight:900;cursor:pointer
  }
  .btnAccept{background:#4ff07a;color:#000}
  .btnDecline{background:#ff6b6b;color:#000}

  #fakePopup{
    position:fixed;right:12px;top:12px;
    background:#222;padding:10px 14px;
    border-radius:8px;color:#fff;z-index:2200;
    display:none;
  }
</style>
</head>
<body>

<div id="tapToStart">Tap to unlock sound (required)</div>

<img id="ghost1" src="ghostimg1.png">
<img id="ghost2" src="ghostimg2.png">
<img id="ghost3" src="ghostimg2.png">

<div id="flash"></div>
<div id="crackOverlay"><img src="crack.png" style="width:100%;height:100%;object-fit:cover"></div>
<div id="black"></div>

<div class="blood-splat" id="bloodSplat"></div>
<div class="blood-fill" id="bloodFill"></div>

<div id="callCard">
  <div class="name" style="font-size:18px">Unknown Caller</div>
  <div style="opacity:.9;font-size:13px;margin-bottom:8px">Incoming surprise...</div>
  <div class="callBtns">
    <button class="btn btnAccept" id="acceptBtn">ACCEPT</button>
    <button class="btn btnDecline" id="declineBtn">DECLINE</button>
  </div>
</div>

<div id="fakePopup">System error detected</div>

<audio id="audioMain" preload="auto"><source src="ghost.mp3"></audio>
<audio id="audioWhisper" preload="auto"><source src="ghost.mp3"></audio>
<audio id="audioScream" preload="auto"><source src="ghost.mp3"></audio>

<script>
(function(){

  const tap = document.getElementById("tapToStart");
  const callCard = document.getElementById("callCard");
  const acceptBtn = document.getElementById("acceptBtn");
  const declineBtn = document.getElementById("declineBtn");
  const popup = document.getElementById("fakePopup");

  const g1 = document.getElementById("ghost1");
  const g2 = document.getElementById("ghost2");
  const g3 = document.getElementById("ghost3");

  const flash = document.getElementById("flash");
  const black = document.getElementById("black");
  const crack = document.getElementById("crackOverlay");

  const bloodSplat = document.getElementById("bloodSplat");
  const bloodFill = document.getElementById("bloodFill");

  const audioMain = document.getElementById("audioMain");
  const audioWhisper = document.getElementById("audioWhisper");
  const audioScream = document.getElementById("audioScream");

  function vibrate(p){ if(navigator.vibrate) navigator.vibrate(p); }

  function screenShake(intensity=20, dur=400){
    const start = performance.now();
    function loop(){
      const now = performance.now();
      if(now - start < dur){
        const dx = (Math.random()*intensity)-(intensity/2);
        const dy = (Math.random()*intensity)-(intensity/2);
        document.body.style.transform = `translate(${dx}px,${dy}px)`;
        requestAnimationFrame(loop);
      } else document.body.style.transform="";
    }
    loop();
  }

  function flashOnce(ms=70){
    flash.style.opacity=1;
    setTimeout(()=>flash.style.opacity=0,ms);
  }

  function redFlicker(){
    document.body.style.background="#400";
    setTimeout(()=>document.body.style.background="",120);
  }

  // unlock audio
  tap.addEventListener("click",()=>{
    tap.remove();
    callCard.style.display="block";
    popup.style.display="block";
    setTimeout(()=>popup.style.display="none",2000);
  });

  declineBtn.addEventListener("click",()=>{
    callCard.style.display="none";
    startCreepPhase();
  });

  acceptBtn.addEventListener("click",()=>{
    callCard.style.display="none";
    startFullSequence();
  });

  function startCreepPhase(){
    audioWhisper.volume=0.14;
    audioWhisper.play().catch(()=>{});

    g1.style.opacity=1;
    g1.style.transform="translate(-50%,10%) scale(0.4)";

    setTimeout(()=>g1.style.transform="translate(-50%,-10%) scale(0.6)",500);

    setTimeout(()=>startFullSequence(),2000);
  }

  function startFullSequence(){

    audioWhisper.pause();

    [audioMain,audioScream].forEach(a=>{
      a.addEventListener("loadedmetadata",()=>{
        if(a.duration>3) a.currentTime=a.duration-3;
      });
    });

    vibrate([100,60,100]);
    screenShake(20,400);
    redFlicker();

    // FIRST GHOST (balanced)
    setTimeout(()=>{
      flashOnce(60);
      g1.style.opacity=1;
      g1.style.transform="translate(-50%,-50%) scale(1.6)";
      audioMain.play().catch(()=>{});
      vibrate([150,80]);
      screenShake(28,500);
    },300);

    setTimeout(()=>{
      g1.style.opacity=0.4;
      g1.style.transform="translate(-50%,-50%) scale(2.3)";
      redFlicker();
    },600);

    // SHADOW GHOST
    setTimeout(()=>{
      g3.style.opacity=1;
      g3.style.transform="translate(-50%,-50%) scale(2.0)";
      setTimeout(()=>g3.style.opacity=0,100);
    },750);

    // MAIN JUMPSCARE (balanced)
    setTimeout(()=>{
      flashOnce(30);
      redFlicker();
      screenShake(55,700);
      vibrate([300,100,300]);

      g2.style.opacity=1;
      g2.style.transform="translate(-50%,-50%) scale(3.0)";

      audioScream.play().catch(()=>{});

      setTimeout(()=>{
        crack.style.opacity=1;
        flashOnce(100);
        setTimeout(()=>g2.style.transform="translate(-50%,-50%) scale(5.0)",120);
        setTimeout(()=>black.style.opacity=1,180);
      },180);

    },1000);

    // BLOOD
    setTimeout(()=>{
      bloodSplat.style.opacity=1;
      bloodSplat.style.transform="translate(-50%,-50%) scale(1.2)";
      vibrate(400);
    },1400);

    setTimeout(()=>{
      bloodFill.style.height="100%";
    },1700);

  }

})();
</script>
</body>
</html>
