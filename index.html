<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Jumpscare</title>
<style>
  body{margin:0;background:#020104;overflow:hidden}
  #ghost1, #ghost2{
    position:fixed;left:50%;top:50%;
    transform:translate(-50%,-50%) scale(0.28);
    width:60vw;max-width:560px;
    opacity:0;transition:transform 1s linear,opacity .6s linear;
  }
  #ghost2{z-index:30}
  #flash,#black{
    position:fixed;inset:0;opacity:0;pointer-events:none;
  }
  #flash{background:#fff;z-index:50}
  #black{background:#000;z-index:60}
  .blood-splat{
    position:fixed;left:50%;top:40%;
    transform:translate(-50%,-50%) scale(0.2);
    width:120vmin;height:120vmin;border-radius:50%;
    background:radial-gradient(circle,#ff5050,#600000,transparent);
    opacity:0;z-index:70;
    transition:transform .4s ease-out,opacity .3s linear;
  }
  .blood-fill{
    position:fixed;left:0;right:0;bottom:0;height:0;
    background:linear-gradient(180deg,#a00000,#400000);
    z-index:75;transition:height 2.5s ease-in;
  }
</style>
</head>
<body>

<!-- FIRST (slow) ghost -->
<img id="ghost1" src="ghostimg1.png">

<!-- SECOND (jump) ghost -->
<img id="ghost2" src="ghostimg2.png">

<div id="flash"></div>
<div id="black"></div>

<div class="blood-splat" id="bloodSplat"></div>
<div class="blood-fill" id="bloodFill"></div>

<audio id="audio" preload="auto">
  <source src="ghost.mp3" type="audio/mpeg">
</audio>

<script>
window.onload = function() {

  const g1 = document.getElementById('ghost1');
  const g2 = document.getElementById('ghost2');
  const audio = document.getElementById('audio');
  const flash = document.getElementById('flash');
  const black = document.getElementById('black');
  const bloodSplat = document.getElementById('bloodSplat');
  const bloodFill = document.getElementById('bloodFill');
  const tap = document.getElementById('tapToStart');

  // Wait for user tap (required for audio)
  tap.addEventListener("click", () => {
    tap.remove();
    startSequence();
  });

  function startSequence() {

    // Load last 3 seconds of audio
    audio.addEventListener("loadedmetadata", () => {
      if(audio.duration > 3){
        audio.currentTime = audio.duration - 3;
      }
    });

    // STEP 1 → ghost1 appears AND audio starts here
    setTimeout(()=>{
      g1.style.opacity = 1;
      g1.style.transform = "translate(-50%,-50%) scale(0.95)";
      audio.play().catch(()=>{});
    }, 300); // audio sync here

    // STEP 2 → fade ghost1 faster
    setTimeout(()=>{
      g1.style.opacity = 0.4;
      g1.style.transform = "translate(-50%,-50%) scale(0.70)";
    }, 2300);

    // STEP 3 → jumpscare ghost2
    setTimeout(()=>{
      flash.style.opacity = 1;
      setTimeout(()=> flash.style.opacity = 0, 120);

      g2.style.opacity = 1;
      g2.style.transform = "translate(-50%,-50%) scale(1.4)";

      setTimeout(()=>{
        g2.style.transform = "translate(-50%,-50%) scale(6)";
        black.style.opacity = 1;
      }, 200);
    }, 2600);

    // STEP 4 → blood effect
    setTimeout(()=>{
      bloodSplat.style.opacity = 1;
      bloodSplat.style.transform = "translate(-50%,-50%) scale(1)";
    }, 3200);

    setTimeout(()=>{
      bloodFill.style.height = "100%";
    }, 3500);
  }
};
</script>


</body>
</html>
